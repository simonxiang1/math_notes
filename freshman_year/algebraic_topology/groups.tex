\section{Free Groups and Group Theory}
Not to be confused with free \textbf{abelian} groups. Whether or not we can count is uncertain, but can we even spell? These notes will follow Fraleigh \S 39,40 and Hatcher \S 1.2.
\orbreak
I've decided to expand this section to include any miscellaneous group theory that I may not have covered/forgot. What texts they follow will probably be at the beginning of each subsection.
\subsection{Words and Reduced Words}
Let $A_i$ be a set of elements (not necessarily finite). We say $A$ is an \textbf{alphabet} and think of the $a_i\in A$ as \textbf{letters}. Symbols of the form $a_{i}^{n}$ are \textbf{syllables} and \textbf{words} are a finite string of syllables. We denote the \textbf{empty word} $1$ as the word with no syllables.
\begin{example}
    Let $A=\{a_1,a_2,a_3\}.$ Then \[
        a_1a_3^{-4}a_2^{2}a_3, \, a_2^{3}a_2^{-1}a_3a_1, \, \text{and} \, a_3^2
    \] are all words (given that $a_i^{1}=a_i$).
\end{example}
We can reduce $a_i^{m}a_i^n$ to $a_i^{m+1}$ (\textbf{elementary contractions}) or replacing $a_i^{0}$ by $1$ (dropping something out of the word). Using a finite number of elementary contractions, we get something called a \textbf{reduced word}.
\begin{example}
    The reduced word of $a_2^{3}a_2^{-1}a_3a_1^2a_1^{-7}$ is $a_2^2a_3a_1^{-5}$.
\end{example}
Is it obvious or not that the reduced form of a word is unique? Does it stay the same rel elementary contractions? Apparently you have to be a great mathematician to know.
\subsection{Free Groups}
Denote the set of all reduced words from our alphabet $A$ as $F[A]$. We give $F[A]$ a group structure in the natural way: for two words $w_1$ and $w_2$ in $F[A]$, let $w_1\cdot w_2$ be the result by string concatenation of $w_2$ onto $w_1$.
\begin{example}
    If $w_1=a_2^3a_1^{-5}a_3^2$ and $w_2=a_3^{-2}a_1^2a_3a_2^{-2}$, then $w_1\cdot w_2=a_2^3a_1^{-3}a_3a_2^{-2}$.
\end{example}
``It would seem obvious'' that this indeed forms a group on the alphabet $A$. Man, the weather outside today is nice.
\begin{definition}[Free Group]
    The group $F[A]$ described above is the \textbf{free group generated by} $A$.
\end{definition}
Sometimes we have a group $G$ and a generating set $A=\{a_i \mid \in I\} $, and we want to know whether or not $G$ is \emph{free} on $\{a_i\} $, that is, $G$ is the free group generated by $\{a_i\} $. 
\begin{definition}[Free Generators]
    If $G$ is a group with a set $A=\{a_i\} $ of generators and is isomorphic to $F[A]$ under a map $\phi \colon G \to F[A]$ such that $\phi(a_i)=a_i$, then $G$ is \textbf{free on} $A$, and the $a_i$ are \textbf{free generators of} $G$. A group is \textbf{free} if it is free on some nonempty set $A$.
\end{definition}
Oh you'll be free... free indeed...
\begin{example}
    $\Z$ is the free group on one generator.
\end{example}
I wish we would call it the ``free group on $n$ letters'' as opposed to the ``free group on $n$ generators'', which is lame, to be consistent with the whole ``mathematicians don't know how to spell'' theme.
\begin{example}
   $\Z$ is the free group on one letter. 
\end{example}
Much better. Time for theorem spam.
\begin{theorem}
    If $G$ is free on $A$ and $B$, then $A$ and $B$ have the same order, that is, any two sets of free generators of a free group have the same cardinality.
\end{theorem}
\begin{proof}
    Refer ``to the literature''.
\end{proof}
\begin{definition}[Rank]
    If $G$ is free on $A$, then the number of letters in $A$ is the \textbf{rank of the free group} $G$.
\end{definition}
\begin{theorem}
    Two free groups are isomorphic if and only if they have the same rank.
\end{theorem}
\begin{proof}
    Immediate.
\end{proof}
\begin{theorem}
A nontrivial proper subgroup of a free group is free.    
\end{theorem}
\begin{proof}
    Back ``to the literature'', says Fraleigh. This can be proving with the theory of covering spaces in algebraic topology.
\end{proof}
\begin{example}
    Let $F[\{x,y\}]$ be the free group on $\{x,y\} $. Let \[
    y_k=x^{k}yx^{-k}
\] for $k \geq 0$. The $y_k$ for $k\geq 0$ are free generators for the subgroup of $F[\{x,y\}]$ that they generate. So the rank of the free subgroup of a free group can be much greater than the rank of the whole group.
\end{example}
\subsection{Homomorphisms of Free Groups}
\begin{theorem}
    Let $G$ be generated by $A=\{a_i \mid \in I\} $ and let $G'$ be any group. If $a_i$' for $i\in I$ are any elements in $G'$ not necessarily distinct, then there is at most one homomorphism $\phi \colon G \to G'$ such that $\phi(a_i)=a_i$'. If $G$ is free on $A$, then there is exactly one such homomorphism.
\end{theorem}
\begin{proof}
    Let $\phi$ be a homomorphism from $G$ into $G'$such that $\phi(a_i)=a_i$'. Then any $x\in G$ can be written as a finite product of the generators $a_i$, denoted \[
        x= \prod_{j} a_{i_{j}}^{n^j},
    \] the $a_i$ not necessarily distinct. Since $\phi$ is a homomorphism, we have \[
    \phi(x)=\prod_{j}\phi\left( a_{i_j}^{n_j} \right) =\prod_{j}\left( a_{i_j}' \right)^{n_j},
\] so a homomorphism is completely determined by its values on elements of a generating set. This shows that there is at most one homomorphism such that  $\phi(a_i)=a_i$'.

Now suppose that $G$ is free on $A$, that is, $G=F[A]$. For \[
x=\prod_{j} a_{i_j} \in G,
\] define $\psi \colon G \to G'$ by \[
\psi(x)=\prod_{j}\left( a_{i_j}'\right) ^{n_j}.
\] The map is well defined, since $F[A]$ consists precisely of reduced words. Since the rules for computation involving exponents are formally the same as those involving exponents in $G$, it can be seen that $\psi(xy)=\psi(x)\psi(y)$ for any elements $x$ and $y$ in $G$, so $\psi$ is indeed a homomorphism.
\end{proof}
Note that this theorem states that a group homomorphism is completely determined by its value on each element of a generating set: eg, a homomorphism of a cyclic group is completely determined by its value on any single generator.
\begin{cor}
    Every group $G'$ is a homomorphic image of a free group $G$.
\end{cor}
\begin{proof}
    Let $G'=\{a_i' \mid i\in I\} $, and let $A=\{a_i \mid \in I\} $ be a set with the same number of elements as $G'$. Let $G=F[A]$. Then by Theorem 2.4 there exists a homomorphism $\psi$ mapping $G$ into $G'$ such that $\psi(a_i)=a_i$'. Clearly the image of $G$ under $\psi$ is all of $G'$.
\end{proof}
Only the free group on one letter is abelian.
\subsection{Free Products of Groups}
\begin{definition}[Free Products]
    As a set, the free product $*_{\alpha}G_{\alpha}$ consists of all words $g_1g_2\cdots g_m$ of arbitrary finite length $m \geq 0$, where each letter $g_i$ belongs to a group $G_{\alpha_i}$ and is not the identity element of $G_{\alpha_i}$, and adjacent letters $g_i$ and $g_{i+1}$ belong to different groups $G_{\alpha}$, that is, $\alpha_i \neq \alpha_{i+1}$.
\end{definition}
Basically, reduced words with alternating letters from different groups. The group operation is concatenation: what if the end of $w_1$ and the beginning of $w_2$ belong to the same $G_{\alpha}$? Merge them into a syllable: what if they merge into the identity, and so the next two letters are from the same alphabet? Merge again, and repeat forever. Eventually we'll get a reduced word.

How to prove this is associative? Relate it to a subgroup of the symmetric group, it takes care of a lot of work. So we have the free product $\Z*\Z$, which is also free. Note that $\Z_2 * \Z_2$ is \emph{not} a free group: since $a^2=e=b^2$, powers of $a$ and $b$ are not needed. So $\Z_2*\Z_2$ consists of the alternating words $a,b,ab,ba,aba,bab,abab,...$ together with the empty word.

A basic property of the free product $*_{\alpha}G_{\alpha}$ is that any collection of homomorphisms $\varphi _{\alpha} \colon G_{\alpha} \to H$ extends uniquely to a homomorphism $\varphi \colon *_{\alpha}G_{\alpha} \to H$. Namely, the value of $\varphi $ on a word $g_1\cdots g_n$ with $g_i \in G_{\alpha_i}$ must be $\varphi _{\alpha_1}(g_1)\cdots \varphi _{\alpha_n}(g_n)$, and using this formula to define $\varphi $ gives a well-defined homomorphism since the process of reducting an unreduced product in $*_{\alpha}G_{\alpha}$ goes not affect its image under $\varphi$.

\begin{example}
    For a free product $G*H$, the inclusions $G\hookrightarrow G\times H$ and $H\hookrightarrow G\times H$ induce a surjective homomorphism $G*H\to G\times H$.
\end{example}
\subsection{Group Presentations}
Apparently, I never took group theory. Let's talk about group presentations! 
\orbreak
Motivation: form a group by giving generators and having them follow certain relations. We want the group as free (free indeed) as possible on these generators.
\begin{example}
    Suppose $G$ has generators $x$ and $y$ and is \textbf{free except for the relation} $xy=yx$, or $xyx^{-1}y^{-1}=1$. This makes sure $G$ is abelian, and so $G$ is isomorphic to $F[\{x,y\} ]$ modulo its commutator subgroup, the smallest normal subgroup containing $xyx^{-1}y^{-1}$. This is because any normal subgroup containing $xyx^{-1}y^{-1}$ gives rise to an abelian factor group and thus contians the commutator subgroup (by a previous theorem).
\end{example}
This example illustrates what we want: let $F[A]$ be a free group and we want a new group as free as possible, with certain equations satisfied. We can always write these equations with the RHS equal to 1, so we consider the equations to be $r_i=1$ for $i\in I$, where $r_i\in F[A]$. If $r_i=1$, then \[
    x(r_i^n)x^{-1}=1
\] for any $x\in F[A],\, n\in \Z$. Any product of elements equal to $1$ again equals $1$, so any finite product of the form \[
\prod_{j}^{} x_{j}\left( r_{i_j}^{n_j} \right) x_{j}^{-1}
\] where $r_{i_j}$ need not be distinct equals $1$ in the new group. It can be seen that the set of all these finite products is a normal subgroup $R$ of $F[A]$. Then any group that looks like $F[A]$ given $r_i=1$ also has $r=1$ for all $r\in R$. But $F[A]/R$ looks like $F[A]$, except that $R$ has been collapsed to form the identity $1$. Hence the group we are after is (at least isomorphic to) $F[A]/R$. We can view this group as described by the generating set $A$ and the set $\{r_i \mid i\in I\} $, abbreviated $\{r_i\} $.
\begin{definition}[Group Presentations]
    Let $A$ be a set and $\{r_i\} \subseteq F[A]$. Let $R$ be the least normal subgroup of $F[A]$ containing the $r_i$. An isomorphism $\phi$ of $F[A]/R$ onto a group $G$ is a \textbf{presentation of} $G$. The sets $A$ and $\{r_i\} $ give a \textbf{group presentation}. The set $A$ is the set of \textbf{generators for the presentation} and each $r_i$ is a \textbf{relator}. Each $r\in R$ is a \textbf{consequence of} $\{r_i\} $. An equation $r_i=1$ is a \textbf{relation}. A \textbf{finite presentation} is one in which both $A$ and $\{r_i\} $ are finite sets.
\end{definition}
Refer back to Example 2.1: $\{x,y\}$ is our set of generators and $xyx^{-1}y^{-1}$ is the only relator. The equation $xyx^{-1}y^{-1}=1$ or $xy=yx$ is a relationâ€” this was an example of a finite presentation.

\subsection{Free Abelian Groups (todo)}
Finally, another missing part of group theory has come back to bite me at a crucial moment. Today we talk about free \textbf{abelian} groups, needed to define chain groups in homology. Some notation stuff (since we're dealing with abelian groups): for an abelian group $G$, $0$ is the identity, $+$ is the operation, and
\[
\begin{drcases}
    &na=\underset{n\,\text{times}}{\underbrace{a+\cdots+a}}\\
    -\!\!\!\!\!\!\!\!\!\!\!&na=\underset{n\,\text{times}}{\underbrace{(-a)+\cdots+(-a)}}
    %very janky solution to get rid of unintended whitespace
\end{drcases}
    \text{for}\ n \in \Z^+ \ \text{and} \ a\in G.
\] We also have $0a=0$, where the LHS $0\in \Z$, and the RHS $0\in G$.
\begin{note}
    $\{(1,0),(0,1)\} $ is a generating set for $\Z\times \Z$, since $(n,m)=n(1,0)=m(0,1)$ for any $(n,m)\in \Z\times \Z$. Note that each element can be \emph{uniquely} expressed in such form, that is, $n,m$ are unique. Linear algebra much?
\end{note}
\begin{theorem}\label{fga}
    Let $X\subseteq G$ for $G$ a nonzero abelian group. Then TFAE:
    \begin{enumerate}
        \item Every nonzero $a\in G$ can be expressed \emph{uniquely} (up to order of summands) in the form $a=n_1x_1+n_2x_2+\cdots+n_rx_r$ for $n_i\neq 0\in \Z$ and distinct $x_i\in X$.
        \item $X$ generates $G$, and $n_1x_1+n_2x_2+\cdots+n_rx_r=0$ for $n_i\in \Z$ and distinct $x_i\in X \iff n_1=n_2=\cdots=n_r=0$.
    \end{enumerate}
\end{theorem}
This is looking an awful lot like linear algebra. Inb4 $\Z$-modules?
\begin{proof}
    Suppose Condition 1 holds, then $G\neq \{0\} \implies X\neq \{0\}.$ To show $0\notin X$, if $x_i=0$ and $x_j=0$, then $x_j=x_i+x_j$ contradicting uniqueness of the expression of $x_j$. Condition 1 implies that $X$ generates $G$, and $n_1x_1+n_2x_2+\cdots+n_rx_r=0$ if $n_1=n_2=\cdots n_r=0$. Suppose $n_1x_2+n_2x_2+\cdots+n_rx_r=0$ for some $n_i\neq 0$: if we drop the zero terms and relabel, we can assume all $n_i\neq 0$. Basically, we've created something from nothing (which is equal to nothing), from which we can derive our contradiction. Then 
   \[
       x_1=x_1+(n_1x_1+x_2x_2+\cdots+n_rx_r)=(n_1+1)x_1+n_2x_2+\cdots n_rx_r,
   \] two ways of writing some nonzero $x_1$, contradicting uniqueness. So every $n_i$ must equal zero, which implies Condition 2.

   Let's go the other way around. Let $a\in G$, since $X$ generates $G$ we have $a=n_1x_1+n_2x_2+\cdots+n_rx_r$. Using the standard technique for proving uniqueness, assume another expression for $a $, that is, $a=n_1x_1+m_2x_2+\cdots+m_rx_r$. So \[
       0=(n_1-m_1)x_1+(n_2-m_2)x_2+\cdots+(n_r-m_r)x_r,
   \] and by Condition two, we have $n_i=m_i$ for $1\leq i \leq r$. We conclude the coefficients must be unique, finishing the proof.
\end{proof}
\begin{definition}[Free abelian group]
    A \textbf{free abelian} group is a group with a generating set $X$ that satistifies the conditions stated in \cref{fga}. We say $X$ is a \textbf{basis} for the group.
\end{definition}
\begin{example}
    The group $\Z\times \Z$ is free abelian with $\{(1,0),(0,1)\} $ a basis. We also have a basis for the free abelian group $\Z\times \Z\times \Z$ as $\{(1,0,0),(0,1,0),(0,0,1)\} $. So finite direct products of $\Z$ are free abelian groups. However, $\Z_n$ is not free abelian, for $nx=0$ for all $x\in \Z_n$, and since $n\neq 0$ this contradicts Condition 2 of being a free abelian group.
\end{example}
Suppose $G$ is free abelian with basis $X=\{x_1,x_2,\cdots,x_r\} $. If $a\in G$ and $a\neq 0$, then $a$ has a unique expression of the form \[
    a=n_1x_1+n_2x_2+\cdots+n_rx_r\quad \text{for} \ n_i\in \Z.
    \] Note that while in our definition of a free abelian group, we required all the coefficients to be nonzero, since we only used some elements of the basis to uniquely define the expression (the basis might have been infinite). However, in this definition we cover all the basis, so we can allow some terms to be zero, since our basis is finite. Define \[
\phi \colon G \to \overset{r \ \text{factors}}{\overbrace{\Z\times \Z\times \cdots \times \Z}}
\] by $\phi(a)=(n_1,n_2,\cdots,n_r)$ and $\phi(0)=(0,0,\cdots,0)$. This leads us to the following result, which we'll state as a theorem. 
\begin{theorem}\label{zzz}
    If $G$ is a nonzero free abelian group with rank\footnote{The \textbf{rank} of $G$ free abelian is the number of elements in a basis for $G$ (since they all have the same number of elements by this theorem).} $r$, then $G$ is isomorphic to $\Z\times \Z\times \cdots \times \Z$ for $r$ factors.
\end{theorem}
\begin{proof}
    All we have to do is check that $\phi \colon G \to \overset{r \ \text{factors} }{\overbrace{\Z\times \Z\times \cdots \times \Z}} ,\, a\mapsto  (n_1,n_2,\cdots ,n_r),\, 0\mapsto (0,0,\cdots ,0)$ is an isomorphism. Let $(n_1,n_2,\cdots ,n_r)$ be an arbitrary element of the $r$ products of $\Z$. Since we can write $a\in G$ as $a=n_1x_1+n_2x_2+\cdots +n_rx_r$ uniquely (since our basis is finite, see the above expression), simply take $\phi (a)$ which maps onto $(n_1,n_2,\cdots ,n_r)$. We know that such $a$ exists with the desired coefficients since $G$ is generated by $X=\{x_i \} _{i\in I}$. Note that this covers the cases where some terms of the $\Z$ product are zero since we relaxed the nonzero coefficient requiremeent since our basis is finite. This also hits zero by definition, and also by noting that Condition 2 exists. Therefore $\phi$ is onto. 
    To show $\phi$ is 1-1, let $a,b\in G$, where $a=n_1x_1+\cdots n_rx_r       $, $b=m_1x_1+\cdots +m_sx_s$. If $\phi(a)=\phi(b)$, then $n_1=m_1,n_2=m_2,\cdots ,n_r=m_s$. So $r=s$, and $a$ and $b$ have the same amount of terms and coefficients in their \emph{unique} expression, so they must be equal. So $\phi$ is 1-1.

    Finally, we want to show that $\phi$ is a homomorphism. Take $a,b\in G$ with the representations as in the previous paragraph. Then WLOG assume that $r<s$, so $a+b=(n_1+m_1)x_1+(n_2+m_2)x_2+\cdots (n_r+m_r)x_r+m_{r+1}x_{r+1}+\cdots +m_sx_s.$ Then $\phi(a+b)=\left( n_1+m_1,n_2+m_2,\cdots ,n_r+m_r,m_{r+1},\cdots ,m_s \right) $. Now $\phi(a)=(n_1,\cdots ,n_r)$ and $\phi(b)=(m_1,\cdots ,m_s)$, so $\phi(a)+\phi(b)=(n_1+m_1,\cdots ,n_r+m_r,\cdots ,m_s)$. Clearly the two are equal, and so $\phi$ is a homomorphism. Therefore $\phi$ is a bijective homomorphism and therefore an isomorphism, and we are done.
\end{proof}     
\begin{theorem}
    Let $G\neq \{0\} $ be a free abelian group with a finite basis. Then every basis of $G$ is finite, and all bases of $G$ have the same number of elements.
\end{theorem}
\begin{proof}
    Say $\{x_1,x_2,\cdots ,x_r\} $ is a basis for $G$. Then by \cref{zzz}, $G\simeq \overset{r \ \text{factors} }{\overbrace{\Z\times \Z\times \cdots \Z}} $. Define the group $2G:=\{2g \mid g\in G\} $, which clearly a normal subgroup of $G$. Then \[
        G /2G \simeq (\overset{r \ \text{factors} }{\overbrace{\Z\times \Z\times \cdots \times \Z}} ) /(\overset{r \ \text{factors} }{\overbrace{2\Z\times 2\Z\times \cdots \times 2\Z}} )\simeq \overset{r \ \text{factors} }{\overbrace{ \Z_2\times \Z_2\times \cdots \Z_2}} .
    \] So $|G /2G|=2^r$, which implies that the number of elements in any finite basis is $r=\log_2|G /2G|$. Therefore any two finite bases have the same amount of elements. To show that $G$ cannot also have an infinite basis, let $Y$ be an arbitrary basis for $G$ and $\{y_1,y_2,\cdots ,y_s\} $ be distinct elements of $Y$. Define $H$ as the subgroup of $G$ generated by $\{y_1,y_2,\cdots ,y_s\} $ and $K$ the subgroup generated by the rest of $Y$. Then $G\simeq H\times K$, since this covers everything generated by elements of $Y$, so \[
    G/2G \simeq(H\times K)/(2H\times 2K) \simeq(H/2H)\times (K/2K).
\] Since $|H /2H|=2^s$, it can be seen that $|G /2G|\geq 2^s$. Since $|G /2G|=2^r$, it must be that $s\leq r$, however this implies that $Y$ cannot be infinite since we could simply take $s>r$, and we are done.
\end{proof}
TODO: proof of the fundamental theorem?





\subsection{Semidirect products and Commutators(todo)}
I had an existential crisis when Dr.\ Allcock said to simply observe that one group is a semidirect of another by such and such group. These notes will follow Dummit and Foote \S 5.
\orbreak
The direct product is what you think it is: the set of $n$-tuples with the group operation done componentwise.

\begin{definition}[Commutators]
    Let $G$ be a group and $x,y\in G$. Let $A,B$ be nonempty subsets of $G$. Then 
    \begin{enumerate}
        \item Define $[x,y]=x^{-1}y^{-1}xy$ as the \textbf{commutator} of $x$ and $y$.
        \item Define $[A,B]=\langle [a,b] \mid a\in A,b\in B \rangle $, the group generated\footnote{Generators and presentations are starting to blur the line for me...} by commutators of elements from $A$ and $B$.
        \item Define $G'=[G:G]=\langle [x,y] \mid x,y\in G \rangle $, the subgroup of $G$ generated by commutators of elements from $G$, called the \textbf{commutator subgroup} of $G$.
    \end{enumerate}
\end{definition}
The commutator of $x$ and $y$ is $1$ iff $x$ and $y$ commute, hence the name.
\begin{prop}
    The factor group $G /G'$ is abelian. Furthermore, $G /G'$ is the largest abelian quotient of $G$ in the sense that if $H \trianglelefteq G$ and $G /H$ is abelian, then $G'\leq H$. Conversely, if $G' \leq H$, then $H \trianglelefteq G$ and $G /H$ is abelian.
\end{prop}
\begin{proof}
    Let $xG',yG'\in G /G'$. Since the commutator $[x,y]\in G'$ collapses to zero, we have 
    \begin{align*}
        (xG')(yG')&=(xy)G'\\
                  &=(yx[x,y])G'\\
                  &=(yx)G'\\
                  &=(yG')(xG').
    \end{align*}
    So $G /G'$ is abelian. Now supposed $H \trianglelefteq G$ and $G /H$ is abelian. Then for all $x,y\in G$ we have $(xH)(yH)=(yH)(xH)$, so
    \begin{align*}
        1H &= (xH)(xH)^{-1}(yH)(yH)^{-1}\\
           &=(xH)^{-1}(yH)^{-1}(xH)(yH)\\
           &=(x^{-1}y^{-1}xy)H\\
           &=[x,y]\in H,
    \end{align*}
    which implies $[x,y]\in H$ for all $x,y\in G$. So $G'\leq H$. Conversely, if  $G' \leq H$, then every subgroup of $G /G'$ is normal, in particular, $H /G' \trianglelefteq G /G'$. We have $H \trianglelefteq G$ by the Lattice Isomorphism Theorem, and by the Third Isomorphism Theorem, we have \[
        G/H\cong (G /G') / (H / G').
    \] Since $G /H$ is isomorphic to a quotient of the abelian group $G /G'$, $G /H$ must be abelian.
\end{proof}
Why does this work? We mod out by the stuff we don't like: in this case, all the commutators collapse to the identity, so elements in the quotient group commute.

Recall that for subgroups $H,K>G$, we define the group $HK=\{hk \mid h\in H,k\in K\} $.
\begin{theorem}
    Suppose $G$ is a group with subgroups $H,K$ such that
    \begin{enumerate}[label=(\arabic*)]
        \item $H$ and $K$ are normal in $G$, and
        \item $H\cap K=1$.
    \end{enumerate}
    Then $HK\simeq H\times K$.
\end{theorem}
\begin{proof}
    Now $HK$ is a subgroup of $G$ iff $HK=KH$, which holds since $H$ and $K$ are normal in $G$. Let $h\in H$ and $k\in K$, since $H\trianglelefteq G$ we have $k^{-1}hk\in H$, so $h^{-1}(k^{-1}hk)\in H$. Similarly, $(h^{-1}k^{-1}h)k\in K$. Now $H\cap K=1$, so $h^{-1}k^{-1}hk=1$, or $hk=kh$, so every element of $H$ commutes with every element of $K$. We can uniquely write each element of $HK$ as a product $hk$ (this was an exercise) with $h\in H$ and $k\in K$, so the map $\varphi \colon HK \to H\times K$, $hk\mapsto (h,k)$ is well defined. To show that $\varphi $ is a homomorphism let $h_1,h_2\in H$, $k_1,k_2\in K$. Since $h_2$ and $k_1$ commute, we have $(h_1k_1)(h_2k_2)=(h_1h_2)(k_1k_2)$, where the latter is a unique way of writing $(h_1k_1)(h_2k_2)$ in the form $h k$ for $h\in H$ and $k\in K$. So 
    \begin{align*}
        \varphi ((h_1k_1)(h_2k_2))&=\varphi (h_1h_2k_1k_2)\\
                                  &=(h_1h_2,k_1k_2)\\
                                  &=(h_1,k_1)(h_2,k_2)=\varphi (h_1k_2)\varphi (h_2k_2),
    \end{align*} and so $\varphi $ is a homomorphism. We have $\varphi $ a surjection since the representation of elements of $HK$ as products $hk$ is unique, and injectivity follows from the fact that $H\cap K=1$ (and therefore so does $\ker \varphi $), and we are done.
\end{proof}
\begin{definition}[]
    If $G$ is a group and $H$ and $K$ are normal subgroups of $G$ with $H\cap K=1$, we say that $HK$ is the \textbf{internal direct product} of $H$ and $K$. We will call $H\times K$ the \textbf{external direct product} of $H$ and $K$. The different between the two is purely notational.
\end{definition}
In short, if $G$ is a group with $H,K\trianglelefteq G$ such that $H\cap K=1$ and every element $g=hk$ uniquely (equivalent to the fact that $G=HK$ when $H\cap K=1$), then $G\simeq H\times K$. The direct product has $H$ and $K$ as subgroups by projection, and thus is uniquely defined by the universal property in category theory.
\orbreak
Now onto semidirect products, a generalization of the direct product by relaxing the normality requirements. This allows us to build ``larger'' groups from $H$ and $K$ such that $G$ has subgroups isomorphic to $H$ and $K$, like direct products. Since one of the subgroups need not be normal, we can form a nonabelian group from an abelian groups. 
\begin{theorem}
    Let $H$ and $K$ be groups and let $\varphi $ be a homomorphism from $K$ into $\operatorname{Aut}(H)$. Let $\cdot $ denote the (left) action of $K$ on $H$ determined by $\varphi $, and $G$ be the set of ordered pairs $(h,k)$ with $h\in H$ and $k\in H$. Define the following multiplication on $G$: \[
        (h_1,k_1)(h_2,k_2)=(h_1k_1\cdot h_2,k_1k_2).
    \] 
    \begin{enumerate}[label=(\arabic*)]
        \item This turns $G$ into a group of order $|H| |K|$.
        \item $G$ contains $H$ and $K$ as subgroups by the projections onto $\{(h,1 )\mid h\in H \} $ and $\{(1,k \mid k\in K\} $. If we identify $H$ and $K$ with their projections, we have
        \item $H\trianglelefteq G$ 
        \item $H\cap K=1$,
        \item For all $h\in H$ and $k\in K$, $khk^{-1}=k\cdot h=\varphi (k)(h)$.
    \end{enumerate}
\end{theorem}
TODO finish semidirects
